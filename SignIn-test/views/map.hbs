<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.svg">

        <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
    crossorigin=""></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
 <style>
    #map {
         height: 800px; 
         width: 1000px;
         position: relative;
        }
 </style>


    <title>Leaflet</title>
</head>
<body>
    <div class="container-lg">
        <div id="map"></div>
      </div>


    <script>


        if ('geolocation' in navigator) {

            const watchID = navigator.geolocation.watchPosition((position) => {
                var map = L.map('map').setView([position.coords.latitude, position.coords.longitude], 18
                );
                L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                }).addTo(map);
           
                var Icon = L.Icon.extend({
                options: {
                    //shadowUrl: 'leaf-shadow.png',
                    //iconSize:     [38, 95],
                    //shadowSize:   [50, 64],
                    iconAnchor:   [25, 16],
                // shadowAnchor: [4, 62],
                    popupAnchor:  [-3, -76]
                }
                });

                var superIcon = new Icon({iconUrl: 'super.png'});
                var miniIcon = new Icon({iconUrl: 'mini.png'}); 
                var manIcon = new Icon({iconUrl: 'man.png'}); 

                var marker = L.marker([38.24, 21.73], {icon: miniIcon}).addTo(map);
                marker.bindPopup("<b>Minimarket</b>.").openPopup();

                var marker = L.marker([38.2466, 21.7345], {icon: superIcon}).addTo(map);
                marker.bindPopup("<b>Supermarket</b>.").openPopup();
                var marker = L.marker([position.coords.latitude, position.coords.longitude], {icon: manIcon}).addTo(map);
                marker.bindPopup("<b>You are here</b>.").openPopup();

                var circle = L.circle([position.coords.latitude, position.coords.longitude], {
                    color: 'red',
                    fillColor: '#f03',
                    fillOpacity: 0.1,
                    radius: 50
                }).addTo(map);
            
            });

        } else {
            alert('Sorry, no position available.');
        }


        var popup = L.popup()
            .setLatLng([38.24, 21.73])
            .setContent("I am a standalone popup.")
            .openOn(map);


        function onMapClick(e) {
             popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }

        map.on('click', onMapClick);



    

    </script>
</body>
</html>